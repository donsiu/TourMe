<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
  <title>Google Maps Multiple Markers</title>
  <script src="http://maps.google.com/maps/api/js?sensor=false"
  type="text/javascript"></script>
  <script  type="text/javascript"  src="http://code.jquery.com/jquery-1.7.2.min.js" ></script>
</head>
<body>
  <div id="map" style="width: 600px; height: 600px"></div>







  <script type="text/javascript">
  onload();
  function onload(){


    // This is FourSquare API
    var clientid = 'FEXOI5LO4ESOMFNPU10M53BC40HKPYBBWHZ0T0ED15PUH5ZU';
    var clientsecret = 'NOHDSSWTRZ4LVE4MQHUDI2E20JXR5MF0ZHPA42KMNFYE3CG1';
    var vdate = '20150116';
    var querynear = 'Chicago';
    var queryloc = 'the north face';

    $(document).ready(function() {

      var foursq = 'https://api.foursquare.com/v2/venues/search?client_id=' + clientid +'&client_secret='+clientsecret +'&v='+vdate+'&near='+ querynear +'&query=' + queryloc;
      // alert(foursq);
      $.ajax({
        type: 'GET',
        url: foursq,
        dataType: 'jsonp',
        success: function(json) {

          for (i = 0; i < 1; i++) {

            var resultid = json['response']['venues'][i].id;
            var resultname = json['response']['venues'][i].name;
            // var resultphone = json['response']['venues'][i]contact.phone;

            // alert(resultid);
             alert(resultname);
            // alert(resultphone);

            var resultlocation = json['response']['venues'][i].location;
            var resultaddress = resultlocation.address;
            var resultlat = resultlocation.lat;
            var resultlng = resultlocation.lng;
            var resultpostcode = resultlocation.postalCode;
            var resultcountry = resultlocation.cc;
            var resultcity = resultlocation.city;
            var resultstate = resultlocation.state;
            var resultformattedaddress = resultlocation.formattedAddress;

            // alert(resultlocation);
            // alert(resultaddress);
            // alert(resultlat);
            // alert(resultlng);
            // alert(resultpostcode);
            // alert(resultcountry);
            // alert(resultcity);
            // alert(resultstate);
            // alert(resultformattedaddress);


            //  still need to work on
          /*  var resultcategory = json['response']['categories'][ ].id;;
            var resultcategoryid = resultcategory.id;
            var resultcategoryname = resultcategory.name;
            var resultcategorypluraname = resultcategory.pluralName;
            var resultcategoryshortname = resultcategory.shortName;

            // alert(resultcategory);
            // alert(resultcategoryid);
            // alert(resultcategoryname);
            // alert(resultcategorypluraname);
            // alert(resultcategoryshortname);*/

            // var resulticon = json['response']['venues'][i].location.icon;
            // var resulticonprefix = resulticon.prefix;
            // var resulticonsuffix = resulticon.suffix;
            // var resulticonprimary = resulticon.primary;
            // alert(resulticon);
            // alert(resulticonprefix);
            // alert(resulticonsuffix);
            // alert(resulticonprimary);

            var resultstats = json['response']['venues'][i].stats;
            var resultstatscheckcount = resultstats.checkinsCount;
            var resultstatsusercount = resultstats.usersCount;
            var resultstatstipcount = resultstats.tipCount;

            alert(resultstats);
            alert(resultstatscheckcount);
            alert(resultstatsusercount);
            alert(resultstatstipcount);


            // var resultlat = json['response']['venues'][i].location.lat;
            // var resultlng = json['response']['venues'][i].location.lng;
            // var resultpostalcode = json['response']['venues'][i].location.postalCode;
            // var resultcity = json['response']['venues'][i].location.city;
            // var resultstate = json['response']['venues'][i].location.state;
            // var resultcountry = json['response']['venues'][i].location.country;

            var resultcategories = json['response']['venues'][i].location.categories;
            // var resultcategories = json['response']['venues'][i].location.





            //  console.log(resultid, resultname,resultcontact,resultlocation.address,resultlocation.cc,resultlocation.city,resultlocation.state,resultlocation.country,resultlocation.postalCode);



            // myFunction(resultname,resultlocation.lat,resultlocation.lng);

          }
        }
      });
    });
  }



  // ------------------------------------------------------------
function myFunction(x,y,z){



        var locations = [
        ['resultname', y, z, 4]
        ];


  var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 10,
    center: new google.maps.LatLng(y, z),
    mapTypeId: google.maps.MapTypeId.ROADMAP
  });

  var infowindow = new google.maps.InfoWindow();

  var marker, i;

  for (i = 0; i < locations.length; i++) {
    marker = new google.maps.Marker({
      position: new google.maps.LatLng(locations[i][1], locations[i][2]),
      map: map
    });

    google.maps.event.addListener(marker, 'click', (function(marker, i) {
      return function() {
        infowindow.setContent(locations[i][0]);
        infowindow.open(map, marker);
      }
    })(marker, i));
  }
}



  // ------------------------------------------------------------




  </script>
</body>
</html>
